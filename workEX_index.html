<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>workEX Dashboard</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/workEX.css') }}">
</head>
<body>
  <header class="navbar">
    <img src="{{ url_for('static', filename='images/workEX.jpg') }}" alt="workEX Logo" class="logo">
    <nav class="nav-links">
      <a href="{{ url_for('home') }}">Home</a>
      <a href="{{ url_for('workout') }}">Workouts</a>
      <a href="{{ url_for('progress') }}">Progress</a>
      <a href="{{ url_for('settings') }}">Settings</a>
      <a href="{{ url_for('logout') }}">Logout</a>
    </nav>
    <div class="theme-toggle">
      <label class="switch">
        <input type="checkbox" id="darkModeToggle">
        <span class="slider round"></span>
      </label>
    </div>
  </header>

  <main class="dashboard">
    <section class="welcome-section">
      <h2>Welcome back, User!</h2><br><h3>workEX: Your Personalized Workout Tracker and Fitness Companion</h3>
      <p id="daily-quote">Loading your daily motivation...</p>
    </section>

    <section class="stats-grid">
      <div class="stat-widget">üèãÔ∏è Workouts Completed: <span id="total-workouts"></span></div>
      <div class="stat-widget">üî• Calories This Week: <span id="weekly-calories"></span></div>
      <div class="stat-widget">üìÖ Streak: <span id="active-streak"></span></div>
      <div class="stat-widget">‚è±Ô∏è Last Workout: <span id="last-workout-summary"></span></div>
    </section>

    <section class="cta-section">
      <a href="{{ url_for('workout') }}" class="start-workout-btn">+ Start New Workout</a>
    </section>

    <section class="recent-workouts">
      <h3>Recent Workouts</h3>
      <div id="recent-workout-cards"></div>
    </section>

    <section class="progress-overview">
      <h3>Weekly Progress</h3>
      <canvas id="weekly-progress-chart"></canvas>
      <a href="{{ url_for('progress') }}" class="view-progress-link">View Full Progress</a>
    </section>

    <section class="daily-reminder" id="reminder-section">
      <p>No workout today ‚Äì stay consistent!</p>
      <button id="remind-later">Remind me later</button>
    </section>

    <section class="goal-tracker">
      <h3>Your Goal: <span id="current-goal"></span></h3>
      <div class="goal-progress-bar"><div id="goal-progress"></div></div>
      <a href="{{ url_for('settings') }}">Update Goal</a>
    </section>

    <section class="calendar-view">
      <h3>Workout Calendar</h3>
      <div id="calendar"></div>
    </section>

    <section class="workout-breakdown">
      <h3>Workout Type Breakdown</h3>
      <canvas id="type-breakdown-chart"></canvas>
    </section>

    <section class="achievements">
      <h3>Achievements</h3>
      <div class="badges">
        <div class="badge" title="First Workout">üèÅ</div>
        <div class="badge" title="7-Day Streak">üî•</div>
        <div class="badge" title="1000 Calories Burned">üèÜ</div>
      </div>
    </section>

    <section class="activity-feed">
      <h3>Recent Activity</h3>
      <ul id="activity-log"></ul>
    </section>

    <section class="optional-widgets">
      <div class="weather-widget" id="weather-widget"></div>

      <div class="playlist-widget" style="max-width: 360px; margin: 2rem auto; padding: 1.5rem; border-radius: 20px;
        background: linear-gradient(to bottom, #6e00ff, #2a003e); color: white; font-family: 'Segoe UI', sans-serif;
        box-shadow: 0 4px 12px rgba(0,0,0,0.4); position: relative;">
        
        <img src="{{ url_for('static', filename='images/playlist_cover.jpg') }}" alt="Playlist Cover"
             style="width: 100px; border-radius: 10px; float: left; margin-right: 1rem;">
      
        <div style="overflow: hidden;">
          <h2 style="margin: 0; font-size: 1.3rem; line-height: 1.4;">GYM PHONK 2025 üòà<br>
            <span style="font-size: 0.95rem; font-weight: normal; color: #e2d6f8;">AGGRESSIVE</span>
          </h2>
          <p style="margin-top: 0.5rem; font-size: 0.9rem; color: #ccc;">üéµ Magic Records</p>
      
          <ul style="list-style: none; padding-left: 0; margin-top: 1.5rem;">
            <li style="margin-bottom: 1rem;">
              <strong style="font-size: 0.95rem;">MURDER PLOT</strong><br>
              <span style="font-size: 0.85rem; color: #ccc;">Kordhell</span>
            </li>
            <li style="margin-bottom: 1rem;">
              <strong style="font-size: 0.95rem;">FUNK DO BOUNCE (Slowed)</strong><br>
              <span style="font-size: 0.85rem; color: #ccc;">Ariis</span>
            </li>
            <li style="margin-bottom: 1rem;">
              <strong style="font-size: 0.95rem;">Tokyo Drift</strong><br>
              <span style="font-size: 0.85rem; color: #ccc;">ZODIVK, dnvn, BELCAST, NIGHTMORSS</span>
            </li>
            <li>
              <strong style="font-size: 0.95rem;">DANCE</strong><br>
              <span style="font-size: 0.85rem; color: #ccc;">THIRST</span>
            </li>
          </ul>
        </div>

        <iframe src="https://open.spotify.com/embed/playlist/YOUR_PLAYLIST_ID" width="300" height="80" frameborder="0" allow="encrypted-media" style="border-radius: 10px;"></iframe>

        <img src="https://upload.wikimedia.org/wikipedia/commons/1/19/Spotify_logo_without_text.svg"
             alt="Spotify Logo" style="width: 30px; position: absolute; bottom: 1rem; right: 1rem; opacity: 0.85;">
      </div>

      <div class="timer-widget">
        <p>Time Since Last Workout: <span id="time-since-last"></span></p>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p>¬© workEX</p>
    <a href="{{ url_for('privacy') }}">Privacy Policy</a> |
    <a href="{{ url_for('terms') }}">Terms of Service</a> |
    <a href="{{ url_for('contact') }}">Contact</a>
  </footer>

  <script src="{{ url_for('static', filename='js/workEX_progress.js') }}"></script>
  <script src="{{ url_for('static', filename='js/workEX_workout.js') }}"></script>
  <script>
    // JavaScript to populate stats, charts, quote, etc.
    const toggle = document.getElementById('darkModeToggle');
    const body = document.body;

    // Load saved theme from localStorage
    if (localStorage.getItem('theme') === 'dark') {
      body.classList.add('dark-mode');
      toggle.checked = true;
    }

    toggle.addEventListener('change', () => {
      if (toggle.checked) {
        body.classList.add('dark-mode');
        localStorage.setItem('theme', 'dark');
      } else {
        body.classList.remove('dark-mode');
        localStorage.setItem('theme', 'light');
      }
    });
  </script>
</body>
</html>
